import{$ as R,A as y,Aa as W,B as c,Ba as Z,Ca as K,Da as Q,F as T,Fa as X,G as m,Ga as Y,H as w,Ha as ee,Ia as te,Ja as ne,Ka as ie,La as ae,Ma as re,N as M,Na as oe,Oa as me,P as N,Pa as le,Q as D,Qa as se,R as V,Ra as pe,Sa as de,Z as q,ba as O,ca as P,h as k,j as g,k as E,ma as B,n as s,o as I,oa as L,pa as f,qa as G,ra as j,s as d,sa as U,t as o,ta as C,u as i,ua as $,v as t,va as J,w as h,wa as z,xa as H,z as F}from"./chunk-JZY52L7S.js";var ce=e=>({"main-class":e});function _e(e,l){e&1&&(i(0,"div",20),h(1,"app-welcome-loader"),t())}function ue(e,l){e&1&&(i(0,"mat-card-title"),m(1,"Add New Expense"),t())}function xe(e,l){e&1&&(i(0,"mat-card-title"),m(1,"Edit Expense"),t())}function fe(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Name is required "),t())}function ge(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Name is invalid "),t())}function Ee(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Name should be max 50 length "),t())}function he(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Amount is required "),t())}function ye(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Date is required "),t())}function Ce(e,l){if(e&1&&(i(0,"mat-option",24),m(1),t()),e&2){let n=l.$implicit;o("value",n),s(),w(n)}}function ve(e,l){if(e&1&&(i(0,"mat-select",23),d(1,Ce,2,2,"mat-option",17),t()),e&2){let n=c(2);s(),o("ngForOf",n.tags)}}function be(e,l){if(e&1&&(i(0,"mat-option",24),m(1),t()),e&2){let n=l.$implicit;o("value",n),s(),w(n)}}function Se(e,l){if(e&1&&(i(0,"mat-select",23),d(1,be,2,2,"mat-option",17),t()),e&2){let n=c(2);s(),o("ngForOf",n.keywords)}}function Ie(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Category is required "),t())}function Fe(e,l){if(e&1&&(i(0,"mat-form-field",9)(1,"mat-label"),m(2,"Expense Category"),t(),d(3,ve,2,1,"mat-select",22)(4,Se,2,1,"mat-select",22)(5,Ie,2,0,"mat-hint",11),t()),e&2){let n,a=c();s(3),o("ngIf",a.tags),s(),o("ngIf",!a.tags),s(),o("ngIf",((n=a.expenseForm.get("expense_category"))==null?null:n.errors)&&((n=a.expenseForm.get("expense_category"))==null?null:n.hasError("required"))&&((n=a.expenseForm.get("expense_category"))==null?null:n.touched))}}function we(e,l){if(e&1&&(i(0,"mat-option",24),m(1),t()),e&2){let n=l.$implicit;o("value",n),s(),w(n)}}function Ae(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Category is required "),t())}function ke(e,l){if(e&1&&(i(0,"mat-form-field",9)(1,"mat-label"),m(2,"Expense Category"),t(),i(3,"mat-select",23),d(4,we,2,2,"mat-option",17),t(),d(5,Ae,2,0,"mat-hint",11),t()),e&2){let n,a=c();s(4),o("ngForOf",a.keywords),s(),o("ngIf",((n=a.expenseForm.get("expense_category"))==null?null:n.errors)&&((n=a.expenseForm.get("expense_category"))==null?null:n.hasError("required"))&&((n=a.expenseForm.get("expense_category"))==null?null:n.touched))}}function Te(e,l){if(e&1&&(i(0,"mat-option",24),m(1),t()),e&2){let n=l.$implicit;o("value",n),s(),w(n)}}function Me(e,l){e&1&&(i(0,"mat-hint",21),m(1," Expense Payment is required "),t())}function Ne(e,l){if(e&1){let n=F();i(0,"button",29),y("click",function(){g(n);let p=c(2);return E(p.onSaveExpense())}),i(1,"mat-icon"),m(2,"save"),t(),m(3," Save "),t()}if(e&2){let n=c(2);o("disabled",n.expenseForm.invalid)}}function De(e,l){e&1&&(i(0,"button",30),h(1,"span",31),m(2," Saving... "),t())}function Ve(e,l){if(e&1){let n=F();i(0,"mat-card-actions",25)(1,"button",26),y("click",function(){g(n);let p=c();return E(p.onReset())}),i(2,"mat-icon"),m(3,"autorenew"),t(),m(4,"Reset "),t(),d(5,Ne,4,1,"button",27)(6,De,3,0,"button",28),t()}if(e&2){let n=c();s(5),o("ngIf",!n.isSaving),s(),o("ngIf",n.isSaving)}}function qe(e,l){if(e&1){let n=F();i(0,"mat-card-actions",25)(1,"button",26),y("click",function(){g(n);let p=c();return E(p.onReset())}),i(2,"mat-icon"),m(3,"autorenew"),t(),m(4,"Reset "),t(),i(5,"button",26),y("click",function(){g(n);let p=c();return E(p.onCancel())}),i(6,"mat-icon"),m(7,"disabled_by_default"),t(),m(8," Cancel "),t(),i(9,"button",32),y("click",function(){g(n);let p=c();return E(p.onEdit())}),i(10,"mat-icon"),m(11,"edit"),t(),m(12,"Update "),t()()}if(e&2){let n=c();s(9),o("disabled",n.expenseForm.invalid&&n.expenseForm.status==="INVALID")}}var Xe=(()=>{let l=class l{constructor(a,p,r,_){this.businessData=a,this._snackBar=p,this.activateRoute=r,this.route=_,this.isEdit=!1,this.filled=!0,this.showLoader=!1,this.maxDate=new Date,this.keywords=[],this.isSaving=!1,this.payments=["Card","Cash","UPI","Net Banking","Paypal"],this.tags=[],this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}ngOnInit(){this.isSaving=!1,this.businessData.onGetAllCategory().subscribe(a=>{this.keywords=a.data}),this.expenseForm=new U({name:new C("",[f.required,f.maxLength(50),f.pattern("^[a-zA-Z ]*$")]),amount:new C("",f.required),expense_category:new C("",f.required),payment:new C("",f.required),expense_date:new C("",f.required),comment:new C("")}),this.activateRoute.paramMap.subscribe(a=>{a.has("id")?(this.isEdit=!0,this.id=a.get("id"),this.prePopulate()):this.isEdit=!1})}prePopulate(){this.showLoader=!0,this.businessData.onGetSingleExpense(this.id).subscribe(a=>{let p=a.data.expense_date.toString().split(" "),r=this.months.indexOf(p[1]),_=parseInt(p[2]),u=parseInt(p[3]);this.expenseForm.setValue({name:a.data.name,amount:a.data.amount,expense_date:new Date(u,r,_),expense_category:a.data.expense_category,payment:a.data.payment,comment:a.data.comment}),this.showLoader=!1},a=>{this.showLoader=!1})}onReset(){this.expenseForm.reset(),this.expenseForm.markAsUntouched()}addEvent(a){let p=a.value.toString();this.date=p.split(" ")}onSaveExpense(){this.isSaving=!0,this.businessData.onCreateExpense(this.expenseForm.value,this.date).subscribe(a=>{this.isSaving=!1,a.status===!0?(this._snackBar.open("Expense Added","",{duration:2e3}),this.onReset()):this._snackBar.open("Error occured!! Please try again","",{duration:2e3})},a=>{this.onReset()})}onEdit(){this.businessData.onUpdateExpense(this.id,this.expenseForm.value).subscribe(a=>{a?this._snackBar.open("Expense Updated","",{duration:2e3}):this._snackBar.open("Error! Please try Again","",{duration:2e3}),this.route.navigate(["dashboard"])})}onCancel(){this.route.navigate(["dashboard"])}};l.\u0275fac=function(p){return new(p||l)(I(W),I(B),I(q),I(R))},l.\u0275cmp=k({type:l,selectors:[["app-add-expense"]],inputs:{tags:"tags"},decls:53,vars:21,consts:[["picker",""],["class","loaderRelay",4,"ngIf"],[3,"ngClass"],[1,"example-card"],[4,"ngIf"],[2,"margin-top","10px"],[3,"formGroup"],[1,"row"],[1,"col-sm-6"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","","formControlName","name"],["style","color: red",4,"ngIf"],["matInput","","placeholder","","formControlName","amount","type","number"],["matInput","","formControlName","expense_date",3,"dateChange","max","matDatepicker"],["matIconSuffix","",3,"for"],["appearance","outline","style","width: 100%",4,"ngIf"],["formControlName","payment"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","comment"],["align","end",4,"ngIf"],[1,"loaderRelay"],[2,"color","red"],["formControlName","expense_category",4,"ngIf"],["formControlName","expense_category"],[3,"value"],["align","end"],["mat-raised-button","",3,"click"],["type","submit","mat-raised-button","",3,"disabled","click",4,"ngIf"],["class","btn btn-success","type","button","disabled","",4,"ngIf"],["type","submit","mat-raised-button","",3,"click","disabled"],["type","button","disabled","",1,"btn","btn-success"],["role","status","aria-hidden","true",1,"spinner-grow","spinner-grow-sm"],["type","submit","mat-raised-button","","color","primary",3,"click","disabled"]],template:function(p,r){if(p&1){let _=F();d(0,_e,2,0,"div",1),i(1,"div",2)(2,"mat-card",3)(3,"mat-card-header"),d(4,ue,2,0,"mat-card-title",4)(5,xe,2,0,"mat-card-title",4),i(6,"mat-card-subtitle"),m(7,"Enter all the required fields to save expense"),t()(),i(8,"mat-card-content",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),m(14,"Expense Name"),t(),h(15,"input",10),d(16,fe,2,0,"mat-hint",11)(17,ge,2,0,"mat-hint",11)(18,Ee,2,0,"mat-hint",11),t()(),i(19,"div",8)(20,"mat-form-field",9)(21,"mat-label"),m(22,"Amount(In Rupees)"),t(),h(23,"input",12),d(24,he,2,0,"mat-hint",11),t()()(),i(25,"div",7)(26,"div",8)(27,"mat-form-field",9)(28,"mat-label"),m(29,"Choose a Expense date"),t(),i(30,"input",13),y("dateChange",function(x){return g(_),E(r.addEvent(x))}),t(),d(31,ye,2,0,"mat-hint",11),h(32,"mat-datepicker-toggle",14)(33,"mat-datepicker",null,0),t()(),i(35,"div",8),d(36,Fe,6,3,"mat-form-field",15)(37,ke,6,2,"mat-form-field",15),t()(),i(38,"div",7)(39,"div",8)(40,"mat-form-field",9)(41,"mat-label"),m(42,"Expense Payment Type"),t(),i(43,"mat-select",16),d(44,Te,2,2,"mat-option",17),t(),d(45,Me,2,0,"mat-hint",11),t()()(),i(46,"div",7)(47,"mat-form-field",9)(48,"mat-label"),m(49,"Comment"),t(),h(50,"textarea",18),t()()()(),d(51,Ve,7,2,"mat-card-actions",19)(52,qe,13,1,"mat-card-actions",19),t()()}if(p&2){let _,u,x,v,b,S,A=T(34);o("ngIf",r.showLoader),s(),o("ngClass",M(19,ce,r.isEdit)),s(3),o("ngIf",!r.isEdit),s(),o("ngIf",r.isEdit),s(4),o("formGroup",r.expenseForm),s(7),o("ngIf",((_=r.expenseForm.get("name"))==null?null:_.errors)&&((_=r.expenseForm.get("name"))==null?null:_.hasError("required"))&&((_=r.expenseForm.get("name"))==null?null:_.touched)),s(),o("ngIf",((u=r.expenseForm.get("name"))==null?null:u.errors)&&((u=r.expenseForm.get("name"))==null?null:u.hasError("pattern"))&&((u=r.expenseForm.get("name"))==null?null:u.touched)),s(),o("ngIf",((x=r.expenseForm.get("name"))==null?null:x.errors)&&((x=r.expenseForm.get("name"))==null?null:x.hasError("maxlength"))&&((x=r.expenseForm.get("name"))==null?null:x.touched)),s(6),o("ngIf",((v=r.expenseForm.get("amount"))==null?null:v.errors)&&((v=r.expenseForm.get("amount"))==null?null:v.hasError("required"))&&((v=r.expenseForm.get("amount"))==null?null:v.touched)),s(6),o("max",r.maxDate)("matDatepicker",A),s(),o("ngIf",((b=r.expenseForm.get("expense_date"))==null?null:b.errors)&&((b=r.expenseForm.get("expense_date"))==null?null:b.hasError("required"))&&((b=r.expenseForm.get("expense_date"))==null?null:b.touched)),s(),o("for",A),s(4),o("ngIf",!r.isEdit),s(),o("ngIf",r.isEdit),s(7),o("ngForOf",r.payments),s(),o("ngIf",((S=r.expenseForm.get("payment"))==null?null:S.errors)&&((S=r.expenseForm.get("payment"))==null?null:S.hasError("required"))&&((S=r.expenseForm.get("payment"))==null?null:S.touched)),s(6),o("ngIf",!r.isEdit),s(),o("ngIf",r.isEdit)}},dependencies:[N,D,V,Z,P,K,te,ee,Q,X,Y,ne,O,ie,ae,re,oe,pe,le,de,se,me,$,L,J,G,j,z,H],styles:[".main-class[_ngcontent-%COMP%]{margin:0 60px;padding-top:50px}.loaderRelay[_ngcontent-%COMP%]{background-color:#00000080;z-index:2;position:fixed;width:100%;height:100%;left:0;top:0;display:flex;justify-content:center;align-items:center}"]});let e=l;return e})();export{Xe as a};
